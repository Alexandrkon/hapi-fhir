<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from hapifhir.io/hapi-fhir/docs/introduction/changelog_2020.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Dec 2021 23:59:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>Changelog: 2020 - HAPI FHIR Documentation</title>

	

	<!-- required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- objectgraph -->
	

	<!-- Favicon -->
	<link rel="icon" href="https://smilecdr.com/favicon.ico">

	<!-- font, icons -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

	<!-- jquery, bootstrap script for dropdown and hover-->
	<script src="../../resources/jquery/dist/jquery.min.js"></script>
	<script src="../../resources/popper.js/dist/umd/popper.min.js"></script>
	<script src="../../resources/bootstrap/dist/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="../../resources/bootstrap/dist/css/bootstrap.min.css"/>

	<!-- fontawesome -->
	<script src="../../resources/font-awesome/js/all.min.js" data-auto-replace-svg="nest"></script>
	<link rel="stylesheet" media="screen" href="../../resources/font-awesome/css/fontawesome.min.css" />

	<!-- Clipboard.js -->
	<script src="../../resources/clipboard.js/clipboard.min.js"></script>

	
	<script src="../../resources/prismjs/prism.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-bash.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-http.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-java.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-javascript.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-json.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-nginx.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-properties.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/components/prism-sql.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/plugins/toolbar/prism-toolbar.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/plugins/command-line/prism-command-line.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.js" type="text/javascript"></script>
	<script src="../../resources/prismjs/plugins/line-numbers/prism-line-numbers.js" type="text/javascript"></script>
	<link href="../../resources/prismjs/themes/prism.css" rel="stylesheet" type="text/css"/>
	<link href="../../resources/prismjs/themes/prism-coy.css" rel="stylesheet" type="text/css"/>
	<link href="../../resources/prismjs/plugins/toolbar/prism-toolbar.css" rel="stylesheet" type="text/css"/>
	<link href="../../resources/prismjs/plugins/line-numbers/prism-line-numbers.css" rel="stylesheet" type="text/css"/>

	<link rel="stylesheet" type="text/css" href="../../css/hapifhir.css">




	<!-- css sheet -->
	<link href="../../resources/cdr-web-resources/css/help-common.css" rel="stylesheet" type="text/css"/>
	<link href="../../css/pages.css" rel="stylesheet" type="text/css"/>
	<link href="../../css/docs.css" rel="stylesheet" type="text/css"/>

</head>

<body>

	
	<header class="header" id="header">
		<nav class="navbar fixed-top navbar-expand-sm navbar-light navbar-greyshadow">
			<a class="navbar-brand text-center" href="https://hapifhir.io/hapi-fhir/" title="Home">
				
				<img src="../../images/logos/small-logo.png" alt="HAPI FHIR logo" width="156" id="collapsed-logo">
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<script type="application/javascript">
				$(function(){
					$(".dropdown").hover(
						function() {
							if ($( window ).width() >= 960) {
								$('.dropdown-menu', this).stop(true, true).fadeIn("fast");
								$(this).toggleClass('open');
								$('b', this).toggleClass("caret caret-up");
							} else {
								$('.dropdown-menu', this).css("display", "");
							}
						},
						function() {
							if ($( window ).width() >= 960) {
								$('.dropdown-menu', this).stop(true, true).fadeOut("fast");
								$(this).toggleClass('open');
								$('b', this).toggleClass("caret caret-up");
							}
						});
				});
			</script>

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="nav navbar-nav ml-auto nav-text">
					<li class="nav-item"><a class="nav-link" href="https://smilecdr.com/">Support</a></li>
					<li class="nav-item"><a class="nav-link" target="_blank" href="https://github.com/jamesagnew/hapi-fhir">Github</a></li>
					<li class="nav-item"><a class="nav-link" href="https://hapifhir.io/hapi-fhir/blog/">News</a></li>
					<li class="nav-item"><a class="nav-link" href="../index.html">Documentation</a></li>
					<li class="nav-item dropdown">
						<a class="nav-link nav-link-dropdown" data-toggle="dropdown" id="navbarGETHELP" href="#">Get Help <i class="nav-chevron fas fa-chevron-down"></i></a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarGETHELP" id="navbarGETHELPDIV">
							<a href="https://github.com/jamesagnew/hapi-fhir/wiki/Getting-Help" class="dropdown-item">Getting Help (read this first!)</a>
							<a href="https://groups.google.com/d/forum/hapi-fhir" class="dropdown-item">Google Group (ask questions)</a>
							<a href="https://github.com/jamesagnew/hapi-fhir/issues" class="dropdown-item">Issue Tracker (report bugs/request features)</a>
							<a href="https://chat.fhir.org/" class="dropdown-item">chat.fhir.org (live chat with FHIR implementers)</a>
							<a href="../appendix/faq.html" class="dropdown-item">Frequently Asked Questions (FAQ)</a>
						</div>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link nav-link-dropdown" data-toggle="dropdown" id="navbarTESTSERVERS" href="#">Test Server <i class="nav-chevron fas fa-chevron-down"></i></a>
						<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarTESTSERVERS" id="navbarTESTSERVERSDIV">
							<a href="http://hapi.fhir.org/" class="dropdown-item">HAPI FHIR Public Test Server</a>
						</div>
					</li>

				</ul>
			</div>
		</nav>
	</header>

	
	<script>
		var scrollAfter = 10;
	</script>

	



	<!-- "Scroll up the the search box" button -->
	<button class="btn btn-secondary hide-sm-and-below button-scroll-up-to-search"
			  onclick="$('#navcolumn').scrollTop(0); $('#button-ftsearch').focus();">
		Search&nbsp;<i class="fa fa-search"></i>
	</button>

	<!-- Right column with the in-page TOC (not visible on mobile) -->
	<div class="rightNavContainer hide-sm-and-below" id="pageNav">
		<nav id="toc"></nav>
	</div>

	<div class="container-fluid grid">
		<div class="row">
			
			<div class="hide-sm-and-below col-md-3 primaryColumn" id="navcolumn">
				<div>
					<div class="index-sidebar" id="side-nav">

						<!-- Fullltext Search box -->
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" aria-label="Search"
									 aria-describedby="button-ftsearch-clear" style="margin-top: 0px;" id="button-ftsearch">
							<div class="input-group-append">
								<button class="btn btn-outline-info" type="button" id="button-ftsearch-clear"
										  onclick="javascript: $('#button-ftsearch').val(''); delayFunction(updateSearchFunction, 500);">
									<i class="fa fa-times-circle"></i>
								</button>
							</div>
							<script type="application/javascript">
								var delayFunction = (function () {
									var timer = 0;
									return function (callback, ms) {
										if (!$('#button-ftsearch').val()) {
											$('#leftTocSearchResults').hide();
											$('#leftTocView').show();
										} else {
											$('#leftTocView').hide();
											$('#leftTocSearchResults').show();
											$('#leftTocSearchResults').empty();
											$('#leftTocSearchResults').append($('<i class="fa fa-spinner fa-spin" style="margin-top: 20px; font-size:24px;"></i>'));
										}
										clearTimeout(timer);
										timer = setTimeout(callback, ms);
									};
								})();

								function updateSearchFunction() {
									if (!$('#button-ftsearch').val()) {
										$('#leftTocSearchResults').hide();
										$('#leftTocView').show();
									} else {
										$('#leftTocView').hide();
										$('#leftTocSearchResults').show();
										$.get("/hapi-fhir/docsearch", {
											term: $('#button-ftsearch').val()
										}, function (data) {
											$('#leftTocSearchResults').empty();

											let leftTocUl = null;
											let leftTocHeader = null;
											for (var idx = 0; idx < data.length; idx++) {
												if (leftTocHeader == null || leftTocHeader.text() !== data[idx].sectionTitle) {
													leftTocHeader = $('<h3>');
													leftTocHeader.text(data[idx].sectionTitle);
													$('#leftTocSearchResults').append(leftTocHeader);
													leftTocUl = $('<ul>');
													$('#leftTocSearchResults').append(leftTocUl);
												}
												let nextLink = $('<a>', {
													href: "/hapi-fhir/docs/" + data[idx].page + ".html"
												});
												nextLink.text(data[idx].title);

												let nextLinkLi = $('<li>').append(nextLink);
												leftTocUl.append(nextLinkLi);
											}
										}, 'json');
									}
								}

								$('#button-ftsearch').keyup(function () {
									delayFunction(updateSearchFunction, 500);
								});

								// Clear the search box if the page is reloaded
								$(function () {
									$('#button-ftsearch').val('');
								});

							</script>
						</div>

						<div id="leftTocView">
							
								<h3 class="activechapter">
									Welcome to HAPI FHIR
								</h3>
								<ul>
									<li>
										<a href="table_of_contents.html">
											<span class="pull-left">Table of Contents</span>
											<span class="pull-right">1.0</span>
										</a>
									</li>
									<li>
										<a href="changelog.html">
											<span class="pull-left">Changelog: 2021</span>
											<span class="pull-right">1.1</span>
										</a>
									</li>
									<li class="active-side">
										<a href="changelog_2020.html">
											<span class="pull-left">Changelog: 2020</span>
											<span class="pull-right">1.2</span>
										</a>
									</li>
									<li>
										<a href="changelog_2019.html">
											<span class="pull-left">Changelog: 2019</span>
											<span class="pull-right">1.3</span>
										</a>
									</li>
									<li>
										<a href="changelog_2018.html">
											<span class="pull-left">Changelog: 2018</span>
											<span class="pull-right">1.4</span>
										</a>
									</li>
									<li>
										<a href="changelog_2017.html">
											<span class="pull-left">Changelog: 2017</span>
											<span class="pull-right">1.5</span>
										</a>
									</li>
									<li>
										<a href="changelog_2016.html">
											<span class="pull-left">Changelog: 2016</span>
											<span class="pull-right">1.6</span>
										</a>
									</li>
									<li>
										<a href="changelog_2015.html">
											<span class="pull-left">Changelog: 2015</span>
											<span class="pull-right">1.7</span>
										</a>
									</li>
									<li>
										<a href="changelog_2014.html">
											<span class="pull-left">Changelog: 2014</span>
											<span class="pull-right">1.8</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Getting Started
								</h3>
								<ul>
									<li>
										<a href="../getting_started/introduction.html">
											<span class="pull-left">Introduction</span>
											<span class="pull-right">2.0</span>
										</a>
									</li>
									<li>
										<a href="../getting_started/versions.html">
											<span class="pull-left">FHIR and HAPI FHIR Versions</span>
											<span class="pull-right">2.1</span>
										</a>
									</li>
									<li>
										<a href="../getting_started/modules.html">
											<span class="pull-left">HAPI FHIR Modules</span>
											<span class="pull-right">2.2</span>
										</a>
									</li>
									<li>
										<a href="../getting_started/downloading_and_importing.html">
											<span class="pull-left">Downloading and Importing</span>
											<span class="pull-right">2.3</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Working With The FHIR Model
								</h3>
								<ul>
									<li>
										<a href="../model/working_with_resources.html">
											<span class="pull-left">Working With Resources</span>
											<span class="pull-right">3.0</span>
										</a>
									</li>
									<li>
										<a href="../model/parsers.html">
											<span class="pull-left">Parsing and Serializing</span>
											<span class="pull-right">3.1</span>
										</a>
									</li>
									<li>
										<a href="../model/references.html">
											<span class="pull-left">Resource References</span>
											<span class="pull-right">3.2</span>
										</a>
									</li>
									<li>
										<a href="../model/profiles_and_extensions.html">
											<span class="pull-left">Profiles and Extensions</span>
											<span class="pull-right">3.3</span>
										</a>
									</li>
									<li>
										<a href="../model/converter.html">
											<span class="pull-left">Version Converters</span>
											<span class="pull-right">3.4</span>
										</a>
									</li>
									<li>
										<a href="../model/custom_structures.html">
											<span class="pull-left">Custom Structures</span>
											<span class="pull-right">3.5</span>
										</a>
									</li>
									<li>
										<a href="../model/narrative_generation.html">
											<span class="pull-left">Narrative Generation</span>
											<span class="pull-right">3.6</span>
										</a>
									</li>
									<li>
										<a href="../model/bundle_builder.html">
											<span class="pull-left">Bundle Builder</span>
											<span class="pull-right">3.7</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Client
								</h3>
								<ul>
									<li>
										<a href="../client/introduction.html">
											<span class="pull-left">Introduction</span>
											<span class="pull-right">4.0</span>
										</a>
									</li>
									<li>
										<a href="../client/get_started.html">
											<span class="pull-left">Get Started ⚡</span>
											<span class="pull-right">4.1</span>
										</a>
									</li>
									<li>
										<a href="../client/generic_client.html">
											<span class="pull-left">Generic (Fluent) Client</span>
											<span class="pull-right">4.2</span>
										</a>
									</li>
									<li>
										<a href="../client/annotation_client.html">
											<span class="pull-left">Annotation Client</span>
											<span class="pull-right">4.3</span>
										</a>
									</li>
									<li>
										<a href="../client/client_configuration.html">
											<span class="pull-left">Client Configuration</span>
											<span class="pull-right">4.4</span>
										</a>
									</li>
									<li>
										<a href="../client/examples.html">
											<span class="pull-left">Client Examples</span>
											<span class="pull-right">4.5</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Plain Server
								</h3>
								<ul>
									<li>
										<a href="../server_plain/server_types.html">
											<span class="pull-left">REST Server Types</span>
											<span class="pull-right">5.0</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/introduction.html">
											<span class="pull-left">Plain Server Introduction</span>
											<span class="pull-right">5.1</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/get_started.html">
											<span class="pull-left">Get Started ⚡</span>
											<span class="pull-right">5.2</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/resource_providers.html">
											<span class="pull-left">Resource Providers and Plain Providers</span>
											<span class="pull-right">5.3</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/rest_operations.html">
											<span class="pull-left">REST Operations: Overview</span>
											<span class="pull-right">5.4</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/rest_operations_search.html">
											<span class="pull-left">REST Operations: Search</span>
											<span class="pull-right">5.5</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/rest_operations_operations.html">
											<span class="pull-left">REST Operations: Extended Operations</span>
											<span class="pull-right">5.6</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/paging.html">
											<span class="pull-left">Paging Search Results</span>
											<span class="pull-right">5.7</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/web_testpage_overlay.html">
											<span class="pull-left">Web Testpage Overlay</span>
											<span class="pull-right">5.8</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/multitenancy.html">
											<span class="pull-left">Multitenancy</span>
											<span class="pull-right">5.9</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/jax_rs.html">
											<span class="pull-left">JAX-RS Support</span>
											<span class="pull-right">5.10</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/customizing_the_capabilitystatement.html">
											<span class="pull-left">Customizing the CapabilityStatement</span>
											<span class="pull-right">5.11</span>
										</a>
									</li>
									<li>
										<a href="../server_plain/openapi.html">
											<span class="pull-left">OpenAPI / Swagger</span>
											<span class="pull-right">5.12</span>
										</a>
									</li>
								</ul>
							
								<h3>
									JPA Server
								</h3>
								<ul>
									<li>
										<a href="../server_jpa/introduction.html">
											<span class="pull-left">Introduction</span>
											<span class="pull-right">6.0</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/get_started.html">
											<span class="pull-left">Get Started ⚡</span>
											<span class="pull-right">6.1</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/architecture.html">
											<span class="pull-left">Architecture</span>
											<span class="pull-right">6.2</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/schema.html">
											<span class="pull-left">Database Schema</span>
											<span class="pull-right">6.3</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/configuration.html">
											<span class="pull-left">Configuration</span>
											<span class="pull-right">6.4</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/search.html">
											<span class="pull-left">Search</span>
											<span class="pull-right">6.5</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/performance.html">
											<span class="pull-left">Performance</span>
											<span class="pull-right">6.6</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/upgrading.html">
											<span class="pull-left">Upgrade Guide</span>
											<span class="pull-right">6.7</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/diff.html">
											<span class="pull-left">Diff Operation</span>
											<span class="pull-right">6.8</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/lastn.html">
											<span class="pull-left">LastN Operation</span>
											<span class="pull-right">6.9</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/elastic.html">
											<span class="pull-left">Lucene/Elasticsearch Indexing</span>
											<span class="pull-right">6.10</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa/terminology.html">
											<span class="pull-left">Terminology</span>
											<span class="pull-right">6.11</span>
										</a>
									</li>
								</ul>
							
								<h3>
									JPA Server: MDM
								</h3>
								<ul>
									<li>
										<a href="../server_jpa_mdm/mdm.html">
											<span class="pull-left">MDM Getting Started</span>
											<span class="pull-right">7.0</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_mdm/mdm_rules.html">
											<span class="pull-left">MDM Rules</span>
											<span class="pull-right">7.1</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_mdm/mdm_eid.html">
											<span class="pull-left">MDM Enterprise Identifiers</span>
											<span class="pull-right">7.2</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_mdm/mdm_operations.html">
											<span class="pull-left">MDM Operations</span>
											<span class="pull-right">7.3</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_mdm/mdm_details.html">
											<span class="pull-left">MDM Technical Details</span>
											<span class="pull-right">7.4</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_mdm/mdm_expansion.html">
											<span class="pull-left">MDM Search Expansion</span>
											<span class="pull-right">7.5</span>
										</a>
									</li>
								</ul>
							
								<h3>
									JPA Server: CQL
								</h3>
								<ul>
									<li>
										<a href="../server_jpa_cql/cql.html">
											<span class="pull-left">CQL Getting Started</span>
											<span class="pull-right">8.0</span>
										</a>
									</li>
								</ul>
							
								<h3>
									JPA Server: Partitioning and Multitenancy
								</h3>
								<ul>
									<li>
										<a href="../server_jpa_partitioning/partitioning.html">
											<span class="pull-left">Partitioning and Multitenancy</span>
											<span class="pull-right">9.0</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_partitioning/partition_interceptor_examples.html">
											<span class="pull-left">Partition Interceptor Examples</span>
											<span class="pull-right">9.1</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_partitioning/partitioning_management_operations.html">
											<span class="pull-left">Partitioning Management Operations</span>
											<span class="pull-right">9.2</span>
										</a>
									</li>
									<li>
										<a href="../server_jpa_partitioning/enabling_in_hapi_fhir.html">
											<span class="pull-left">Enabling Partitioning in HAPI FHIR</span>
											<span class="pull-right">9.3</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Interceptors
								</h3>
								<ul>
									<li>
										<a href="../interceptors/interceptors.html">
											<span class="pull-left">Interceptors Overview</span>
											<span class="pull-right">10.0</span>
										</a>
									</li>
									<li>
										<a href="../interceptors/client_interceptors.html">
											<span class="pull-left">Client Interceptors</span>
											<span class="pull-right">10.1</span>
										</a>
									</li>
									<li>
										<a href="../interceptors/client_pointcuts.html">
											<span class="pull-left">Client Pointcuts</span>
											<span class="pull-right">10.2</span>
										</a>
									</li>
									<li>
										<a href="../interceptors/built_in_client_interceptors.html">
											<span class="pull-left">Built-In Client Interceptors</span>
											<span class="pull-right">10.3</span>
										</a>
									</li>
									<li>
										<a href="../interceptors/server_interceptors.html">
											<span class="pull-left">Server Interceptors</span>
											<span class="pull-right">10.4</span>
										</a>
									</li>
									<li>
										<a href="../interceptors/server_pointcuts.html">
											<span class="pull-left">Server Pointcuts</span>
											<span class="pull-right">10.5</span>
										</a>
									</li>
									<li>
										<a href="../interceptors/built_in_server_interceptors.html">
											<span class="pull-left">Built-In Server Interceptors</span>
											<span class="pull-right">10.6</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Security
								</h3>
								<ul>
									<li>
										<a href="../security/introduction.html">
											<span class="pull-left">Introduction</span>
											<span class="pull-right">11.0</span>
										</a>
									</li>
									<li>
										<a href="../security/authorization_interceptor.html">
											<span class="pull-left">Authorization Interceptor</span>
											<span class="pull-right">11.1</span>
										</a>
									</li>
									<li>
										<a href="../security/consent_interceptor.html">
											<span class="pull-left">Consent Interceptor</span>
											<span class="pull-right">11.2</span>
										</a>
									</li>
									<li>
										<a href="../security/search_narrowing_interceptor.html">
											<span class="pull-left">Search Narrowing Interceptor</span>
											<span class="pull-right">11.3</span>
										</a>
									</li>
									<li>
										<a href="../security/cors.html">
											<span class="pull-left">CORS</span>
											<span class="pull-right">11.4</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Validation
								</h3>
								<ul>
									<li>
										<a href="../validation/introduction.html">
											<span class="pull-left">Introduction</span>
											<span class="pull-right">12.0</span>
										</a>
									</li>
									<li>
										<a href="../validation/parser_error_handler.html">
											<span class="pull-left">Parser Error Handler</span>
											<span class="pull-right">12.1</span>
										</a>
									</li>
									<li>
										<a href="../validation/instance_validator.html">
											<span class="pull-left">Instance Validator</span>
											<span class="pull-right">12.2</span>
										</a>
									</li>
									<li>
										<a href="../validation/validation_support_modules.html">
											<span class="pull-left">Validation Support Modules</span>
											<span class="pull-right">12.3</span>
										</a>
									</li>
									<li>
										<a href="../validation/schema_validator.html">
											<span class="pull-left">Schema/Schematron Validator</span>
											<span class="pull-right">12.4</span>
										</a>
									</li>
									<li>
										<a href="../validation/repository_validating_interceptor.html">
											<span class="pull-left">Repository Validating Interceptor</span>
											<span class="pull-right">12.5</span>
										</a>
									</li>
									<li>
										<a href="../validation/examples.html">
											<span class="pull-left">Validation Examples</span>
											<span class="pull-right">12.6</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Android
								</h3>
								<ul>
									<li>
										<a href="../android/client.html">
											<span class="pull-left">Android Client</span>
											<span class="pull-right">13.0</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Tools
								</h3>
								<ul>
									<li>
										<a href="../tools/hapi_fhir_cli.html">
											<span class="pull-left">Command Line Interface (CLI) Tool</span>
											<span class="pull-right">14.0</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Contributing to HAPI FHIR
								</h3>
								<ul>
									<li>
										<a href="../contributing/hacking_guide.html">
											<span class="pull-left">Hacking Guide</span>
											<span class="pull-right">15.0</span>
										</a>
									</li>
								</ul>
							
								<h3>
									Appendix
								</h3>
								<ul>
									<li>
										<a href="../appendix/logging.html">
											<span class="pull-left">Logging</span>
											<span class="pull-right">16.0</span>
										</a>
									</li>
									<li>
										<a href="../appendix/faq.html">
											<span class="pull-left">FAQ</span>
											<span class="pull-right">16.1</span>
										</a>
									</li>
									<li>
										<a href="../appendix/javadocs.html">
											<span class="pull-left">JavaDocs</span>
											<span class="pull-right">16.2</span>
										</a>
									</li>
								</ul>
							
						</div>
						<div id="leftTocSearchResults">

						</div>

					</div>
				</div>
			</div>

			
			<div class="col-xs-12 col-md-9 primaryColumn" id="tocscroll">

				<!-- Pager -->
				<div class="hide-sm-and-below">
</div>

				<div class="hide-md-and-above mobile-header-links">
					<a href="table_of_contents.html" class="btn btn-primary">
						<i class="fa fa-arrow-left"></i>
						&nbsp;&nbsp;
						Table of Contents
					</a>
					<p>Changelog: 2020</p>
				</div>

				<div class="docs-content">
					<a name="changelog-2020"></a>
<section id="section0"><h1 data-toc-text="Changelog: 2020"><span class="helpHeaderSectionNumberBadge">1.2</span>Changelog: 2020</h1><a href="changelog_2020.html#changelog-2020" class="helpSectionLink">&nbsp;</a>
</section>

<a name="changelog"></a>
<section id="section1"><h1 data-toc-text="Changelog"><span class="helpHeaderSectionNumberBadge">1.2.1</span>Changelog</h1><a href="changelog_2020.html#changelog" class="helpSectionLink">&nbsp;</a>
</section>

<a name="hapi-fhir-520-numbat"></a>
<section id="section2"><h1 data-toc-text="HAPI FHIR 5.2.0  (Numbat)"><span class="helpHeaderSectionNumberBadge">1.2.2</span>HAPI FHIR 5.2.0  (Numbat)</h1><a href="changelog_2020.html#hapi-fhir-520-numbat" class="helpSectionLink">&nbsp;</a><a name="release-information"></a>
<h2>Release Information</h2>
<p><strong>Released:</strong> 2020-11-19</p>
<p><strong>Codename:</strong> (Numbat)</p>
<a name="changes"></a>
<h2>Changes</h2>
<table class="table">
    <tr>
        <td>
            <a name="change5.2.0-0"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The version of a few dependencies have been bumped to the latest versions (dependent HAPI modules listed in brackets): <ul> <li>Jackson (Base): 2.10.0 -&gt; 2.11.2</li> <li>Flyway (JPA): 6.4.1 -&gt; 6.5.4</li> <li>JQuery (Testpage Overlay): 3.3.1 -&gt; 3.5.1</li> <li>UCUM (JPA): 1.0.2 -&gt; 1.0.3</li> <li>HttpClient (Client): 4.5.12 -&gt; 4.5.13</li> <li>Awesome Bootstrap Checkbos (Testpage Overlay): 1.0.1 -&gt; 1.0.2</li> <li>MomentJS (Testpage Overlay): 2.15.1 -&gt; 2.27.0</li> <li>Select2 (Testpage Overlay): 4.0.3 -&gt; 4.0.13</li> </ul></p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-1"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The JPA Server SQL generator for handling FHIR search operations has been completely rewritten to no longer depend on the Hibernate QueryBuilder APIs. This rewrite produces much more efficient SQL in many cases and should dramatically increase performance in such cases. For example, a 10x speedup has been observed on Postgresql when searching a very large database where the search URL has multiple chained search params. <br/><br/> This new SQL builder will be disabled by default in HAPI FHIR 5.2.0 and Smile CDR 2020.11.R01, and can be enabled via a setting in the DaoConfig (HAPI FHIR) and Storage Module config (Smile CDR). Snapshot/prerelease builds will ship with this new SQL builder enabled by default, and the intention is to make this the default and ultimately remove the legacy SQL builder in the next quarterly release. <br/><br/> We highly encourage testing of this new feature, and welcome feedback on how it performs in your environment.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2041"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2041">#2041</a>
        </td>
        <td>
            <p>A new class called TransactionBuilder has been added. This class can be used to build FHIR Transaction Bundles easily.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2045"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2045">#2045</a>
        </td>
        <td>
            <p>The <code>RemoteTerminologyServiceValidationSupport</code> class used for connecting to a remote terminology service will no longer attempt to perform code validation for fields where the code system is implied, since there is no FHIR operation allowing this style of validation to be performed remotely.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2051"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2051">#2051</a>
        </td>
        <td>
            <p>The FHIR Client will now accept an HTTP 204 NO CONTENT as a response to a write operation such as a create/update/transaction/etc.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2059"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2059">#2059</a>
        </td>
        <td>
            <p>In the JPA server, when performing synchronous searches it is now possible to specify a limit and offset using a new (nonstandard) parameter called _offset. Thanks to Tuomo Ala-Vannesluoma for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2078"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2078">#2078</a>
        </td>
        <td>
            <p>When using package support to install a package with STORE_AND_INSTALL mode, resources that are already present in the database will now be updated to the contents of the version in the package.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2081"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2081">#2081</a>
        </td>
        <td>
            <p>Terminology loader for LOINC will now support specifying version and loading multiple versions of LOINC.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2081"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2081">#2081</a>
        </td>
        <td>
            <p>An implementation of CodeSystem validate-code operation has been added for R4 and R5.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2081"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2081">#2081</a>
        </td>
        <td>
            <p>Operations for CodeSystem, ValueSet and ConceptMap will now support multiple CodeSystem versions.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2083"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2083">#2083</a>
        </td>
        <td>
            <p>The JPA search coordinator will now use worker threads sourced from a ThreadPoolTaskExecutor, in order to simplify the addition of decorators to those threads. Thanks to Tue Toft Nørgård for the pull requets!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2087"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2087">#2087</a>
        </td>
        <td>
            <p>Added new DaoConfig parameter called maximumTransactionBundleSize that if not-null will throw a PayloadTooLarge exception when the number of resources in a transaction bundle exceeds this size.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2099"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2099">#2099</a>
        </td>
        <td>
            <p>Stored SearchParameter resources with a status of DRAFT will no longer override and disable existing built-in search parameters. This is done in order to avoid issues caused by uploading NPM packages such as US Core that contain a large number of draft parameters.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2104"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2104">#2104</a>
        </td>
        <td>
            <p>EMPI enhancements.  Added new IDENTIFIER matcher rule type that defines a matcher where two resources share the same value for a particular identifier system, or if no system is indicated, defines a matcher where two resources share any matching system,values identifier.  Improved channel and batch troubleshooting logging.  Added new controller layer to support non-fhir apis.  Changed rule json format; replaced 'metric' with either matcher or simiarity that now have their own distinct subkeys.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2118"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2118">#2118</a>
        </td>
        <td>
            <p>Support for RDF Turle parsing and encoding has now been added. This support was previously partially implemented, but did not work correctly. A huge thanks to Josh Collins and Eric Prud'hommeaux of Janeiro Digital for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2131"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2131">#2131</a>
        </td>
        <td>
            <p>A new _expunge parameter has been added to the DELETE operation when deleting multiple resources via a URL.  For example DELETE http://www.example.com:8000/Observation?_expunge=true or DELETE http://www.example.com:8000/Observation?status=cancelled&amp;_expunge=true.  When the _expunge parameter is provided to DELETE then the matched resources and all of their history will be both deleted and expunged from the database.  This will perform considerably faster than doing the delete and expunge separately.  Note that Expunge must be enabled on the server for this to work.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2141"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2141">#2141</a>
        </td>
        <td>
            <p>The Package Installer has been enhanced to allow resources that do not have a url element to be loaded from a package. Resources without url will instead use identifier element.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2142"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2142">#2142</a>
        </td>
        <td>
            <p>A null check was added to the R4 CapabilityStatement generator, in order to improve the error message when a mandatory parameter is missed. Thanks to GitHub user @blangley28 for the contribution!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2128"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2128">#2128</a>
        </td>
        <td>
            <p>The version of Bootstrap used by the Testpage Overlay project has been upgraded from <strong>3.4.0</strong> to <strong>4.5.2</strong>. Note that this is a major release upgrade, so any overlay implementations may require some modification to deal with changes to the Bootstrap framework.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2145"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2145">#2145</a>
        </td>
        <td>
            <p>In HAPI FHIR 5.1.0 JPA Server, if partitioning was enabled, but no interceptor was registered to the <code>STORAGE_PARTITION_IDENTIFY_READ</code> pointcut, the system would simply default to 'All Partitions'. This was not the intended behaviour, so this will now result in an error.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-1607"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1607">#1607</a>
        </td>
        <td>
            <p>A performance bottleneck was fixed in the datetime datatypes that caused lock contention when parsing resources in heavily multithreaded environments. Thanks to GitHub user @abrsystematic for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2043"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2043">#2043</a>
        </td>
        <td>
            <p>The JPA SearchParameetr validator did not reject custom Search Parameetrs with an invalid path expression consisting of only a resource type and no element name. Creating such a search parameter could cause strange indexing issues, so this has been added to the validator.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2049"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2049">#2049</a>
        </td>
        <td>
            <p>A potential NPE in the JPA server was fixed. This error could be triggered by searching for resources with unresolvable references. Thanks to Anders Havn for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2050"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2050">#2050</a>
        </td>
        <td>
            <p>An issue was fixed where multiple JPA server updates to the same resource within the same database transaction would fail with a database constraint error.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2062"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2062">#2062</a>
        </td>
        <td>
            <p>A deadlock was fixed where the Database-backed Binary Storage service could lock the system up when running under very high contention.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2097"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2097">#2097</a>
        </td>
        <td>
            <p>A crash in the JPA server was fixed when performing a search containined two chained search parameters to date target types.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2099"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2099">#2099</a>
        </td>
        <td>
            <p>When using an NPM package spec in STORE_AND_INSTALL mode, conformance resources will only be stored if they have a status of <code>active</code>. This fixes a bug wgere installing the US Core IG caused searches to stop working due to draft Search Parameters.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2101"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2101">#2101</a>
        </td>
        <td>
            <p>In some circumstances when using a Plain Server, the generated CapabilityStatement could have duplciate Search Parameter definitions. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2104"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2104">#2104</a>
        </td>
        <td>
            <p>EMPI bug fixes. Special characters in search param values (e.g. space) led to missed matches; these are now properly escaped so matches are accurately found. Candidates were failing to match when candidateSearchParams was empty; matches now work properly with empty candidateSearchParams.  matchResultMap entries were incorrectly resolving if any named matchFields matched; they now correctly resolve only when ALL matchFields match.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2112"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2112">#2112</a>
        </td>
        <td>
            <p>When parsing XML encoded resources, if an <code>xml:lang</code> attribute was present in the narrative HTML, it would incorrectly have its prefix omitted. Thanks to Oliver Egger for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2113"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2113">#2113</a>
        </td>
        <td>
            <p>When performing a <code>_lastUpdated</code> search in the JPA server where the parameter value(s) are supplied with date (not time) precision, a timezone bug could cause some resources to not be included. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2147"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2147">#2147</a>
        </td>
        <td>
            <p>The <code>_typeFilter</code> parameter did not correctly work for JPA Bulk Export jobs. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2150"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2150">#2150</a>
        </td>
        <td>
            <p>The In Memory search matcher (used for Subscriptions) could crash if a subscription was registered using the <code>_source</code> search parameter, and a resource was processed with no source value. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2162"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2162">#2162</a>
        </td>
        <td>
            <p>When expanding a pre-expanded ValueSet using a filter, the filter was ignored and the pre-expansion was not used resulting in an inefficient and potentially incorrect expansion. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.2.0-2164"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2164">#2164</a>
        </td>
        <td>
            <p>The JPA Package loader was failing if the package had a description longer than 200 characters. This has been fixed.</p>
        </td>
    </tr>
</table>
</section>

<a name="change5.2.0-0"></a>
<section id="section3"><h1 data-toc-text="HAPI FHIR 5.1.0  (Manticore)"><span class="helpHeaderSectionNumberBadge">1.2.3</span>HAPI FHIR 5.1.0  (Manticore)</h1><a href="changelog_2020.html#change5.2.0-0" class="helpSectionLink">&nbsp;</a><a name="release-information-1"></a>
<h2>Release Information</h2>
<p><strong>Released:</strong> 2020-08-13</p>
<p><strong>Codename:</strong> (Manticore)</p>
<a name="changes-1"></a>
<h2>Changes</h2>
<table class="table">
    <tr>
        <td>
            <a name="change5.1.0-0"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The version of a few dependencies have been bumped to the latest versions (dependent HAPI modules listed in brackets): <ul> <li>Guava (JPA): 28.2-jre -&gt; 29.0-jre</li> <li>Jetty (CLI): 9.4.24.v20191120 -&gt; 9.4.30.v20200611</li> </ul></p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1637"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1637">#1637</a>
        </td>
        <td>
            <p>An index has been added on the TRM_CONCEPT table. This index was previously missing, meaning that rebuilding large code systems took an abnormally long amount of time. Thanks to Jacob Stampe Mikkelsen for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1666"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1666">#1666</a>
        </td>
        <td>
            <p>The email sender used by email subscriptions can now be configured with TLS parameters.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1826"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1826">#1826</a>
        </td>
        <td>
            <p>A new service has been added to the JPA server that fetches FHIR Implementation Guide NPM packages and installs the contained conformance resources into the JPA repository. Thanks to Martin Zacho Grønhøj for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1862"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1862">#1862</a>
        </td>
        <td>
            <p>The Snapshot Generator now uses the R5 codebase for all versions of FHIR (similar to how the validator already worked). This means that the snapshot generator will be much more feature complete and hopefully have fewer bugs given the single codebase.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1864"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1864">#1864</a>
        </td>
        <td>
            <p>AuthorizationInterceptor can now fully secure GraphQL operations in the JPA server, meaning that it is possible to use compartment and type rules to restrict the specific data that is available through the GraphQL interface.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1865"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1865">#1865</a>
        </td>
        <td>
            <p>The validator will now correctly issue a warning instead of an error if a code can't be found when validating a code in a CodeSystem where the content mode (CodeSystem.content) has a value of <em>fragment</em>.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1867"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1867">#1867</a>
        </td>
        <td>
            <p>Initial implementation of lastn operation that uses an Elasticsearch v6 server to index observations.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1871"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1871">#1871</a>
        </td>
        <td>
            <p>In the JPA server, when indexing Date SearchParameters where the value being indexed is a FHIR Period that is missing either a lower bound or an upper bound, a default value representing an extreme 'beginning of time' or 'end of time' is now used. This allows range searches to return more accurate results.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1893"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1893">#1893</a>
        </td>
        <td>
            <p>Support for the <code>:of-type</code> modifier has been added to TokenParamModifier. Thanks to Alexander Lukyanchikov for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1896"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1896">#1896</a>
        </td>
        <td>
            <p>Support has been added for GraphQL querying using an HTTP POST (with the query in the body). Thanks to Ibrohim Kholilul Islam for the pull request implementing this new feature!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1911"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1911">#1911</a>
        </td>
        <td>
            <p>Support for FHIR NPM Packages has been added to the JPA server. This new functionality allows packages to be installed to special tables within the FHIR JPA schema, and conformance resources used for validation.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1917"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1917">#1917</a>
        </td>
        <td>
            <p>The LOINC importer has been updated to support the file format used by the LOINC 2.68 release.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1921"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1921">#1921</a>
        </td>
        <td>
            <p>A new optional <code>type</code> parameter has been added to the <code>$mark-all-resources-for-reindexing</code> operation, allowing resources of a specific type to be marked.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1926"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1926">#1926</a>
        </td>
        <td>
            <p>Spring Batch has been added to HAPI FHIR in the <code>hapi-fhir-jpaserver-batch</code> project. <code>hapi-fhir-jpaserver-base</code> will make use of it for batch jobs</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1932"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1932">#1932</a>
        </td>
        <td>
            <p>A new configuration bean called ValidationSettings has been added to the JPA server. This can be used to enable validation of reference target resources if necessary.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1934"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1934">#1934</a>
        </td>
        <td>
            <p>The <strong>RemoteTerminologyServiceValidationSupport</strong> validation support module, which is used to connect to external/remote terminology services, has been significantly enhanced to provide testing for supported CodeSystems and ValueSets. It will also now validate codes in fields that are not bound to a specific ValueSet.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1936"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1936">#1936</a>
        </td>
        <td>
            <p>Phonetic name search is now supported via ISearchParamRegistry.setStringEncoder().</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1939"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1939">#1939</a>
        </td>
        <td>
            <p>The JPA server is now able to support _has queries where the linked search expression on the right hand side of the _has parameter is a second _has query.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1951"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1951">#1951</a>
        </td>
        <td>
            <p>REST Hook subscriptions may now specify a search expression to be used to fetch a collection of resources to deliver when a subscription matches.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1966"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1966">#1966</a>
        </td>
        <td>
            <p>The GraphQL module can now accept arrays of arguments as input to searches, and will treat them as OR'ed parameters. Thanks to Ibrohim Kholilul Isla for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1967"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1967">#1967</a>
        </td>
        <td>
            <p>The HAPI FHIR CommonCodeSystemsTerminologyService validation support module now includes support for ISO 3166 (country codes).</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1971"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1971">#1971</a>
        </td>
        <td>
            <p>A new interceptor called <code>UserRequestRetryVersionConflictsInterceptor</code> has been added to the JPA server. This interceptor allows clients to instruct the server to attempt to avoid returning an HTTP 409 (Version Conflict) if two concurrent client requests try to update the same resource at the same time.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1982"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1982">#1982</a>
        </td>
        <td>
            <p>The validator will now accept codes that are defined in a ValueSet where the valueset contains an enumeration of codes, and the CodeSystem URL refers to an unknown CodeSystem. This allows successful validation of ValueSets in several IGs that rely on the existence of grammar based systems.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1984"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1984">#1984</a>
        </td>
        <td>
            <p>Two new operations have been added for EMPI: <code>$empi-clear</code> and <code>$empi-submit</code>. <code>$empi-clear</code> will delete EMPI links, and related Person objects. <code>$empi-submit</code> will submit all matching resources for EMPI processing.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1994"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1994">#1994</a>
        </td>
        <td>
            <p>A few issues in the migrator when applying migrations against some versions of MSSQL were resolved</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2023"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2023">#2023</a>
        </td>
        <td>
            <p>The JPA server maintains a cache of active SearchParameeter resources that can cause misleading results if a SearchParameter is changed and other resources that would be indexed by the changed SearchParameter are updated before the cache refreshes. A new interceptor has been added that should force a refresh sooner, especially on non-clustered systems.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2025"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2025">#2025</a>
        </td>
        <td>
            <p>A new interceptor has been added for the JPA server that selectively allows resource deletions to proceed even if there are valid references to the candidate for deletion from other resources that are not being deleted.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1899"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1899">#1899</a>
        </td>
        <td>
            <p>When submitting a transaction bundle containing a large number of resources being written, where the resources had tags or profile definitions, a number of redundant database calls have been optimized out. This should significantly improve performance for these scenarios.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1937"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1937">#1937</a>
        </td>
        <td>
            <p>Due to an inefficient SQL statement when performing searches with large numbers of _revincludes where the resources have tags, a large number of database roundtrips were produced when searching. This has been streamlined, greatly improving the response times for some searches.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1963"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1963">#1963</a>
        </td>
        <td>
            <p>When performing a search in the JPA server using a chained search parameter, an unnecessary resource type predicate was previously added to the generated SQL and has now been removed. This should improve performance on some queries.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1945"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1945">#1945</a>
        </td>
        <td>
            <p>When performing a JPA 'upsert' (a PUT to an ID that may or may not already exist) on a partitioned system, the partition interceptor will now be called once to determine the READ partition in order to find the candidate resource to update, and possibly a second time to determine the CREATE partition if a new row is actually being created. Previously only the CREATE partition was checked and used to perform the initial read.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1952"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1952">#1952</a>
        </td>
        <td>
            <p>HAPI FHIR has been migrated to use JUnit 5 (from JUnit 4) for unit testing. This change does not affect users of the library, but helps to make tests more maintainable.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1857">#1857</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: The method <code>FhirContext#getResourceNames()</code> has been renamed to <code>FhirContext#getResourceTypes()</code>. HAPI currently goes back and forth between the two, but is consolidating on <code>Types</code>.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-237"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/237">#237</a>
        </td>
        <td>
            <p>The R5 structure methods for working with extensions on arbitrary fields, e.g. <code>getExtensionByUrl(String)</code>, <code>removeExtension(String)</code>, <code>getExtensionsByUrl(String)</code> <code>hasExtension(String)</code>, and <code>getExtensionString(String)</code> have been enhanced so that they now return modifier extensions as well as the non-modifier extensions they previously returned.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1862">#1862</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: The IValidationSupport interface has had one further change after the rewrite in HAPI FHIR 5.0.0. Instead of passing an IValidationSupport object as an argument to many methods on the interface, a context object is now used instead.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1848"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1848">#1848</a>
        </td>
        <td>
            <p>When parsing a resource into a custom structure (e.g. a custom class extended a built-in FHIR resource class), inter-resouirce references could contain invaliud java refeences to other resources. Thanks to Christian Ohr for reporting and fixing!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1850"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1850">#1850</a>
        </td>
        <td>
            <p>The <a href="https://www.hl7.org/fhir/fhirpatch.html">FHIR Patch</a> format is now supported for patching resources, in addition to the previously supported JSON Patch and XML Patch.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1850"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1850">#1850</a>
        </td>
        <td>
            <p>When serializing a resource, the JSON Parser will now ignore any extensions that are present on an element if they do not have a URL or any children populated.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1850"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1850">#1850</a>
        </td>
        <td>
            <p>A new operation has been added to the JPA server called <code>$diff</code>. This operation can generate a FHIR Patch diff showing the changes between two versions of a resource, or even two separate resources. See <a href="../server_jpa/diff.html">Diff</a> for more information.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1851"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1851">#1851</a>
        </td>
        <td>
            <p>In HAPI FHIR 5.0.0, partitioned JPA servers were introduced. The documentation claimed that an interceptor implementing the STORAGE_PARTITION_IDENTIFY_READ was optional, but the server incorrectly made this mandatory. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1853"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1853">#1853</a>
        </td>
        <td>
            <p>The <code>@Interceptor</code> annotation was not marked as inheritable, meaning that the order attribute was lost when using Spring proxies. Thanks to Tue Toft Nørgård for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1854"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1854">#1854</a>
        </td>
        <td>
            <p>When using a SearchParameter with uniqueness enabled, the <code>$expunge</code> operation sometimes failed to expunge resources with a database constraint error. This has been fixed.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1856"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1856">#1856</a>
        </td>
        <td>
            <p>The subscription delivery queue in the JPA server was erroneously keeping both a copy of the serialized and the deserialized payload in memory for each entry in the queue, doubling the memory requirements. This also caused failures when delivering XML payloads in some configurations. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1863"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1863">#1863</a>
        </td>
        <td>
            <p>Cascade deletes were failing in cases where the resource being deleted had more than 600 conflicts due to a hard-coded limit on the number of conflicts that the CascadingDeleteInterceptor was allowed to process at a time. This hard-coded limit has been replaced with an optional configuration parameter.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1878"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1878">#1878</a>
        </td>
        <td>
            <p>Several duplicate classes were removed from the testpage overlay, avoiding a warning on startup. Thanks to Joel Schneider for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1895"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1895">#1895</a>
        </td>
        <td>
            <p>HAPI FHIR 5.0.0 introduced a regression in JPA validator performance, where a number of unnecessary database lookups were introduced. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1933"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1933">#1933</a>
        </td>
        <td>
            <p><code>BaseValidationSupportWrapper.expandValueSet(...)</code> and <code>ValidationSupportChain.expandValueSet(...)</code> were incorrectly replacing expansion options (i.e. offset and count) with <code>null</code>, causing these parameters to be ignored when invoking the <code>ValueSet$expand</code> operation. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1948"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1948">#1948</a>
        </td>
        <td>
            <p>When validating resources containing codes in a ValueSet that included UCUM codes, the validator would incorrectly report that the code was valid even if it was not in the ValueSet. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1971"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1971">#1971</a>
        </td>
        <td>
            <p>The create-package CLI command failed with a NPE if no package dependencies were specified. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1983"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1983">#1983</a>
        </td>
        <td>
            <p>ConceptMap resources were blocked from uploading into the JPA server if the ConceptMap had a source and/or target URL defined at the ConceptMap level but not at the group level. This prevented some US Core resources from being successfully uploaded. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2003"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2003">#2003</a>
        </td>
        <td>
            <p>In HAPI FHIR 4.2.0 and before, due to the lenient Gson parser it was possible to store data in the JPA server that contained invalid decimal numbers with no leading digits, e.g. <code>.123</code> and <code>-.123</code>. When we moved to Jackson as a JSON parser, these values could no longer be parsed due to Jackson's more strict (and correct) interpretation of the JSON specification. Unfortunately this led to data previously stored in the database being unusable. A fix has been implemented that automatically adds a leading zero to any decimals that were previously saved in invalid state. New data will still be blocked from being added if it contains invalid JSON numbers.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2005"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2005">#2005</a>
        </td>
        <td>
            <p>When generating a snapshot for a StructureDefinition that extends another non-base StructureDefinition, if the parent SD did not have a snapshot itself, the child snapshot would be empty. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2006"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2006">#2006</a>
        </td>
        <td>
            <p>When updating a resource with links that change, to reduce database operations, hapi-fhir reuses link index records. However, all the columns were being properly updated except for the source path column which was accidentally missed and continued to hold the previous value.  This resulted in mismatched source paths and values.  This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2012"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2012">#2012</a>
        </td>
        <td>
            <p>In some cases, the Bundle total was not getting filtered from search results when using the consent interceptor. Thanks to Jens Kristian Villadsen for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2022"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2022">#2022</a>
        </td>
        <td>
            <p>When performing a resource $expunge in the JPA server, in-memory caches caused issues if a forced ID was reused quickly enough (as can be the case in some testing scenarios). Thanks to GitHub user @janvdpol for reporting!&quot;</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-2026"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-shield-alt"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/2026">#2026</a>
        </td>
        <td>
            <p>An XSS vulnerability was reported in the HAPI FHIR Testpage Overlay module. Thanks to Will Davison of NCC Group (Manchester UK) for disclosing this vulnerability.
Users of the HAPI FHIR Testpage Overlay can use a specially crafted URL to exploit an XSS vulnerability in this module, allowing arbitrary JavaScript to be executed in the user's browser. The impact of this vulnerability is believed to be low, as this module is intended for testing and not believed to be widely used for any production purposes. Nonetheless, we recommend all users of the affected module upgrade immediately.
A complete audit of the affected codebase has been completed in order to detect and resolve any similar issues.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.1.0-1855"></a>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1855">#1855</a>
        </td>
        <td>
            <p>A very old feature that is not believed to be used anywhere has been removed: The ServerProfileProvider is a special resource provider that was automatically registered to HAPI FHIR REST servers, and served up StructureDefinitions that were registered to the FhirContext. Registering custom StructureDefinitions against the FhirContext for exposure through the REST API (as what was then the /Profile endpoint) was planned to be a common feature during the DSTU1 lifecycle but did not turn out to be a useful approach. This feature was mostly forgotten about until the logic for selecting resource provider handler methods was revamped and the old mechanism suddenly became the default resource provider for StructureDefinition resources in the JPA server. We don't expect any negative impact by this change, please post in our mailing list if you disagree.</p>
        </td>
    </tr>
</table>
</section>

<a name="change5.1.0-0"></a>
<section id="section4"><h1 data-toc-text="HAPI FHIR 5.0.2  (Labrador)"><span class="helpHeaderSectionNumberBadge">1.2.4</span>HAPI FHIR 5.0.2  (Labrador)</h1><a href="changelog_2020.html#change5.1.0-0" class="helpSectionLink">&nbsp;</a><a name="release-information-2"></a>
<h2>Release Information</h2>
<p><strong>Released:</strong> 2020-06-02</p>
<p><strong>Codename:</strong> (Labrador)</p>
<a name="changes-2"></a>
<h2>Changes</h2>
<table class="table">
    <tr>
        <td>
            <a name="change5.0.2-0"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>This release corrects a snapshot dependency on org.hl7.fhir.core that was accidentally left in HAPI FHIR 5.0.1.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.2-1"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The default setting for the partition mode's Include Hashes in Search Indexes setting was incorrectly set to true in HAPI FHIR 5.0.0 and has now been changed to false, as this is a more sensible default. Note that this wil affect existing systems that are trying this feature out. A manual reindex of data may be required.</p>
        </td>
    </tr>
</table>
</section>

<a name="change5.0.2-0"></a>
<section id="section5"><h1 data-toc-text="HAPI FHIR 5.0.1  (Labrador)"><span class="helpHeaderSectionNumberBadge">1.2.5</span>HAPI FHIR 5.0.1  (Labrador)</h1><a href="changelog_2020.html#change5.0.2-0" class="helpSectionLink">&nbsp;</a><a name="release-information-3"></a>
<h2>Release Information</h2>
<p><strong>Released:</strong> 2020-05-15</p>
<p><strong>Codename:</strong> (Labrador)</p>
<a name="changes-3"></a>
<h2>Changes</h2>
<table class="table">
    <tr>
        <td>
            <a name="change5.0.1-1842"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1842">#1842</a>
        </td>
        <td>
            <p>When performing queries with multiple chained search parameters, such as 'Observation?subject.identifier=FOO&amp;specimen.identifier=BAR', an unnecessary SQL join was introduced into the resulting query. This was inefficient, and made it particularly hard for the RDBMS optimizer to pick an efficient query plan in some cases. This is not fixing a regression (this issue has always existed in HAPI FHIR JPA) but it was deemed sufficiently important to merit a dedicated point release.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.1-1847"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1847">#1847</a>
        </td>
        <td>
            <p>Issue #1849 added two new search columns for date SearchParameters that are used to provide searching at the day granularity in a timezone independent way. These new columns require a new database index that was missed in the original merge.</p>
        </td>
    </tr>
</table>
</section>

<a name="change5.0.1-1842"></a>
<section id="section6"><h1 data-toc-text="HAPI FHIR 5.0.0  (Labrador)"><span class="helpHeaderSectionNumberBadge">1.2.6</span>HAPI FHIR 5.0.0  (Labrador)</h1><a href="changelog_2020.html#change5.0.1-1842" class="helpSectionLink">&nbsp;</a><a name="release-information-4"></a>
<h2>Release Information</h2>
<p><strong>Released:</strong> 2020-05-13</p>
<p><strong>Codename:</strong> (Labrador)</p>
<a name="changes-4"></a>
<h2>Changes</h2>
<table class="table">
    <tr>
        <td>
            <a name="change5.0.0-0"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The version of a few dependencies have been bumped to the latest versions (dependent HAPI modules listed in brackets): <ul> <li>Hibernate ORM (JPA): 5.4.6 -&gt; 5.4.14</li> <li>Hibernate Search (JPA): 5.11.3 -&gt; 5.11.5</li> <li>Hibernate Validator (JPA): 5.4.2.Final -&gt; 6.1.3.Final</li> <li>Guava (JPA): 28.0 -&gt; 28.2</li> <li>Spring Boot (Boot): 2.2.0.RELEASE -&gt; 2.2.6.RELEASE</li> <li>FlywayDB (JPA) 6.1.0 -&gt; 6.4.1</li> <li>Apache HTTPCliient (JPA): 4.5.9 -&gt; 4.5.12</li> <li>Apache HTTPCore (JPA): 4.4.11 -&gt; 4.4.14</li> <li>Commons Compress (All): 1.19 -&gt; 1.20</li> </ul></p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1710"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1710">#1710</a>
        </td>
        <td>
            <p>The classes BaseOrListParam and BaseParam now have public visibility in order to make it easier to create more generic APIs. Thanks to GitHub user @ibacher for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1728"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1728">#1728</a>
        </td>
        <td>
            <p>Fields of type <code>canonical</code> were not previously indexed by the JPA server, meaning that some default search parameters could not be honoured (e.g. StructureDefinition:valueset). This is now corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1736"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1736">#1736</a>
        </td>
        <td>
            <p>When performing large terminology concept additions via the delta addition service, concepts will now be added via the deferred storage service, meaning that they will be added in small incremental batches instead of as a part of one large transaction. This helps to avoid timeouts and memory issues when uploading large collections of concepts.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1742"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1742">#1742</a>
        </td>
        <td>
            <p>When performing a terminology delta ADD operation, if the number of codes being added is large the codes will be added in small batches via an asynchronous scheduled task in order to avoid overwhelming the database with a large operation.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1749"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1749">#1749</a>
        </td>
        <td>
            <p>A new constructor has been added to RestfulServer that accepts an InterceptorService. Thanks to gematik FuE for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1760"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1760">#1760</a>
        </td>
        <td>
            <p>Adds support for chained parameters in a _has query. For example <code>GET /Patient?_has:Observation:subject:device.identifier=1234-5</code>. Adds a performance warning on any queries that use an unqualified resource in a chain which ends up resolving to 2 or more candidate target types. Thanks to Jean-Francois Briere for the patch.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1769"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1769">#1769</a>
        </td>
        <td>
            <p>A new built-in server interceptor called FhirPathFilterInterceptor has been added. This interceptor evaluates an arbitrary FHIRPath expression against the resource being returned and replaces the response with a Parameters resource containing the results of the evaluation.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1772"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1772">#1772</a>
        </td>
        <td>
            <p>The JPA server now allows chained searches on the <code>_type</code> parameter. For example, the following could be used to find all Encounters with a context of type Group: <code>Encounter?subject._type=Group</code>.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1774"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1774">#1774</a>
        </td>
        <td>
            <p>The REST Server will now raise an error if a client tries to perform a FHIR <em>read</em> operation while using URL paramaters that are specific to FHIR <em>search</em> operations. This should help clients who are mistaking the semantics between the two operations, as previously the search parameters were simply ignored leading to confusion. Thanks to Jafer Khan for implementing this!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1776"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1776">#1776</a>
        </td>
        <td>
            <p>A new server interceptor called <code>ResponseSizeCapturingInterceptor</code> has been added. This interceptor captures and makes available the number of characters written (pre-compression if Gzip compression is being used) to the HTTP response stream for FHIR responses.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1783"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1783">#1783</a>
        </td>
        <td>
            <p>In the JPA sevrer, if overriding built-in search parameters is not enabled, the server will now return an error if a client tries to create a SearchParameter that is trying to override one. Previously, the SearchParameter would be stored but silently ignored, which was confusing.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1783"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1783">#1783</a>
        </td>
        <td>
            <p>A new client interceptor called UrlTenantSelectionInterceptor has been added. This interceptor allows the dynamic selection of a tenant ID on servers that are using URL Base Tenant Selection.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1783"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1783">#1783</a>
        </td>
        <td>
            <p>In the JPA server, the ModelConfig setting 'DefaultSearchParamsCanBeOverridden' now has a default value of <em>true</em> (previously this was <em>false</em>). In addition, when creating/updating a SearchParameter resource, the system will now raise an error if the client is attempting to override a built-in SearchParameter when this setting is disabled (previously this was silently ignored).</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1783"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1783">#1783</a>
        </td>
        <td>
            <p>The client interceptor pointcuts <code>CLIENT_REQUEST</code> and <code>CLIENT_RESPONSE</code> now allow a parameter of type <code>IRestfulClient</code> to be injected, containing a reference to the client making the request. In addition, CLIENT_REQUEST interceptors are now able to modify the URL of the request before it is performed.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1788"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1788">#1788</a>
        </td>
        <td>
            <p>The ApacheProxyAddressStrategy has been improved to add support for additional proxy headers inclusing <code>X-Forwarded-Host</code>, <code>X-Forwarded-Proto</code>, <code>X-Forwarded-Port</code>, and <code>X-Forwarded-Prefix</code>. Thanks to Thomas Papke for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1793"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1793">#1793</a>
        </td>
        <td>
            <p>When parsing JSON resources, if an element contains an invalid value, the Parser Error Handler did not have access to the actual name of the element being parsed. This meant that errors lacked useful detail in order to diagnose the issue. This has been corrected. Thanks to GitHub user @jwalter for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1797"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1797">#1797</a>
        </td>
        <td>
            <p>The HAPI FHIR instance validator now includes validation for currency types (ISO 4217)</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1798"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1798">#1798</a>
        </td>
        <td>
            <p>New mthods have been added to DateClientParam allowing searching at MILLIS precision. Thanks to David Gileadi for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1802"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1802">#1802</a>
        </td>
        <td>
            <p>In a plain server, if a Resource Provider class had two methods with the same parameter names (as specified in the @OptionalParam or @RequiredParam) but different cardinalities, the server could sometimes pick the incorrect method to execute. The selection algorithm has been improved to no longer have this issue, and to be more consistent and predictable in terms of which resource provider method is selected when the choice is somewhat ambiguous.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1804"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1804">#1804</a>
        </td>
        <td>
            <p>Support for HAPI FHIR cascading deletes has been added to the Generic Client.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1812"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1812">#1812</a>
        </td>
        <td>
            <p>The JAX-RS server will now scan and serve ResourceProvider methods defined in super-classes as well. Thanks to Zhe Wang for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1824"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1824">#1824</a>
        </td>
        <td>
            <p>Native support for UCUM has been added to the validation stack, meaning that UCUM codes can be validated at runtime without the need for any external validation.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1831"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1831">#1831</a>
        </td>
        <td>
            <p>Indexing for the :text modifier can now be globally or selectively disabled in the JPA server. This can have a measurable impact on index sizes and write speed in servers with large numbers of token indexes.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1836"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1836">#1836</a>
        </td>
        <td>
            <p>In HAPI FHIR 4.2.0, when performing a Bulk Export on a server with Binary Storage enabled, the bulk export files were not able to take advantage of the externalized binary stroage and would be stored in the relational DB. This has now been enhanced to allow bulk export files to store externally.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1838"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1838">#1838</a>
        </td>
        <td>
            <p>Date searches can be performed relative to 'now' using the <code>%now</code> parameter value.  For example, to search for Procedures with a date later than now, you can search for <code>/Procedure?date=ge%now</code>. Note the '%' will need to be URL escaped so the actual URL will be <code>/Procedure?date=ge%25now</code>. The way this works is the server substitutes <code>%now</code> with the current date and time in the standard FHIR format <code>yyyy-MM-ddTHH:mm:ss</code> before submitting it to the FHIR Storage module. Similarly date searches can be performed relative to 'today' using the '%today' parameter value.  '%today' works the same as '%now' except that it searches as a 'date' type as opposed to a 'dateTime' type.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1702"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1702">#1702</a>
        </td>
        <td>
            <p>Loading of _include and _revinclude values has been optimized to be slightly faster</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1726"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1726">#1726</a>
        </td>
        <td>
            <p>When performing date range searches in the JPA server, the server was generating extra unneccessary joins in the generated SQL. This has been streamlined, which should result in faster searches when performing date ranges.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1813"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1813">#1813</a>
        </td>
        <td>
            <p>History operations in the JPA server have been significantly optimized to remove the number of SQL SELECT statements, and to completely eliminate any INSERT statements. This should have a positive effect on heavy users of history operations. In addition, history operations will no longer write an entry in the query cache (HFJ_SEARCH) table which should further improve performance of this operation.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1693"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1693">#1693</a>
        </td>
        <td>
            <p>Adjusted schema definitions for Resource and Resource History tables to eliminate circular dependencies with Forced ID table and to improve performance when expunging large numbers of resources.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1698"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1698">#1698</a>
        </td>
        <td>
            <p>Removed the SEARCH_LAST_RETURNED column of the HFJ_SEARCH table.  HAPI FHIR updated the HFJ_SEARCH table with every request, but this led to unecessary database load.  The purpose of this column was to ensure that search results were kept around long enough for systems that needed them for paging (default one hour).  When expiring search results, we used to add one hour to SEARCH_LAST_RETURNED to determine the expiry time.  However, the length of time where a search result could be updated was relatively small (default one minute).  So rather than keeping track of the expiry time to expire exactly one hour after the last returned time, hapi now simply expires after the maximum possible length of time (default one hour plus one minute).  This eliminates the need to update the HFJ_SEARCH table with every search.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1715"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1715">#1715</a>
        </td>
        <td>
            <p>The version converters for all versions except R4/R5 have been reworked to be split into individual classes per resource type (the R4/R5 converters were already organized this way). Thanks to Mark Iantorno for a huge effort to write a Java source parser/serializer to acomplish this task.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-2"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1769">#1769</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: The <code>IFluentPath</code> interface has been renamed to <code>IFhirPath</code>, and the <code>FhirContext#newFluentPath()</code> method has been replaced with an equivalent <code>FhirContext.newFhirPath()</code>. The FhirPath expression language was initially called FluentPath before being renamed, so this change brings HAPI FHIR inline with the correct naming.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-3"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1790">#1790</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: Several classes in the JPA server have been moved to new packages, including the DaoConfig and IDao interfaces. These classes have not changed in terms of functionality, but existing projects may need to adjust some package import statements.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-4"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1804">#1804</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: The Generic/Fluent <strong>delete()</strong> operation now returns a <a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-base/ca/uhn/fhir/rest/api/MethodOutcome.html">MethodOutcome</a> object instead of an OperationOutcome. The OperationOutcomoe is still available direcly by querying the MethodOutcome object, but this change makes the delete() method more consistent with other similar methods in the API.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-5"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: Some R4 and R5 structure fields containing a <code>code</code> value with a <strong>Required (closed) binding</strong> did not use the java Enum type that was generated for the given field. These have been changed to use the Enum values where possible. This change does not remove any functionality from the model but may require a small amount of re-coding to deal with new setter/getter types on a few fields.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-6"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1807">#1807</a>
        </td>
        <td>
            <p><strong>New Feature</strong>: A new feature has been added to the JPA server called **<a href="../server_jpa_partitioning/partitioning.html">Partitioning</a>. This feature allows data to be segregated using a user defined partitioning strategy. This can be leveraged to take advantags of native RDBMS partition strategies, and also to implement <strong>multitenant servers</strong>.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-7"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1841">#1841</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: The FHIR R5 draft definitions have been updated to the current 'Preview 2' definitions (FHIR 4.4.0).</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1583">#1583</a>
        </td>
        <td>
            <p><strong>Breaking Change</strong>: The HAPI FHIR Validation infrastructure has changed significantly under the hood. Existing users of the validator may need to change package declarations (as FhirInstanceValidator and several other related classes have been moved) and potentially add new modules to their Validation Support Chain. See <a href="../validation/instance_validator.html#migrating-to-hapi-fhir-5x">Migrating to HAPI FHIR 5.x</a> for details on how to account for this change in your code.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>DSTU3 searches using near-distance only worked on Location resources directly.  It now works on chained searches on resources with a location. E.g. PractitionerRole?location.near-distance=1.0 now works properly.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1499"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1499">#1499</a>
        </td>
        <td>
            <p>When performing a search with a DateParam that has DAY precision, rely on new ordinal date field for comparison instead of attempting to find oldest and newest instant that could be valid.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1717"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1717">#1717</a>
        </td>
        <td>
            <p>ValueSet expansions containing lists of terms did not correctly expand when backed by ElasticSearch due to the use of a feature not supported in ES. Thanks to Jens Villadsen for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1721"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1721">#1721</a>
        </td>
        <td>
            <p>When performing a terminology delta ADD operation, existing parent-child links were often deleted and recrreated needlessly during operations, which could result in a deadlock. This has been resolved.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1732"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1732">#1732</a>
        </td>
        <td>
            <p>In the JPA server, quickly deleting a resource and then performing a query that had recently returned that search result could cause a cached stub resource (containing no data but with an ID and metadata populated) to be returned. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1734"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1734">#1734</a>
        </td>
        <td>
            <p>The Pointcut JavaDoc had an incorrect link from one pointcut to another and has been fixed. Thanks to Bert Roos for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1742"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1742">#1742</a>
        </td>
        <td>
            <p>When validating a resource, the validator will now report an error if the resource declares conformance to an unknown or invalid profile URL via the <code>Resource.meta.profile</code> declaration. Previously this was a warning and did not block successful validation.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1742"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1742">#1742</a>
        </td>
        <td>
            <p>When performing a search in the JPA server where the only parameter was a <code>_has</code> parameter, the server did not respect the resource typename being searched for, causing false positive search results. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1759"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1759">#1759</a>
        </td>
        <td>
            <p>When deleting searches from the query cache where a large number of searches with a large number of results were present, the system would repeatedly mark the same rows as deletion candidates. This put unneccessary pressure on the database and has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1761"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1761">#1761</a>
        </td>
        <td>
            <p>A minor regression in 4.2.0 was introduced, where JPA searches using the <code>_id</code> search parameter often had a duplicate SQL predicate in their where clause. This issue may not have caused any bad effects on some environments, but it did look strange in SQL logs and has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1763"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1763">#1763</a>
        </td>
        <td>
            <p>In servers, when requesting _summary=count, the response Bundle.type value was filtered, leading to an invalid response bundle. This has been corrected. Thanks to GitHub user @Legi429 for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1770"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1770">#1770</a>
        </td>
        <td>
            <p>When parsing Bundles, contained resoures from other entries in the Bundle could incorrecly be stitched into a target resource if they had the same local ID. Thanks to August Langhout for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1778"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1778">#1778</a>
        </td>
        <td>
            <p>When encoding a resource, a crash could occur if the resource had a contained Bundle resource. This is not commonly done, but there are valid scenarios for doing so.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1791"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1791">#1791</a>
        </td>
        <td>
            <p>The GraphQL Expression parser sometimes fails and reports unhelpful error messages when using search arguments. Thanks to Ibrohim Kholilul Islam for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1794"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1794">#1794</a>
        </td>
        <td>
            <p>A bug in the JPA server prevented Client Resource ID mode from being set to NOT_ALLOWED when Server Resource ID mode was set to UUID. Thanks to GitHub user @G-2-Z for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1801"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1801">#1801</a>
        </td>
        <td>
            <p>When invoking JPA DAO methods programatically to store a resource (as opposed to using the FHIR REST API), if the resource being stored had any contained resources, these would sometimes not be visible to the search parameter indexer, leading to missing search params. This is a very fringe use case, but a workaround has been put in place to solve it.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1801"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1801">#1801</a>
        </td>
        <td>
            <p>In previous versions of HAPI FHIR, the server incorrectly silently accepted decimal numbers in JSON with no leading numbers (e.g. <code>.123</code>), as well as decimal numbers with more than one leading zero (e.g. 00.123). These will now be rejected by the JSON parser. Any values with this string that have previously been stored in the JPA server database will now automatically normalize the value to <code>0.123</code>.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1806"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1806">#1806</a>
        </td>
        <td>
            <p>The JPA server ElasticSearch provider failed to initialize if username/password credentials were not explicitly provided, meaning it could not run on AWS-supplied ElasticSearch. Thanks to Maciej Kucharek for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1810"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1810">#1810</a>
        </td>
        <td>
            <p>The text styling on the Testpage Overlay homepage has been improved to use native Bootstrap warning colours. Thanks to Joel Schneider for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1829"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1829">#1829</a>
        </td>
        <td>
            <p>In the JPA server, performing a search where the only search parameter was the <code>_tag</code> parameter could cause resources of the wrong type to be included in search results. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change5.0.0-1837"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1837">#1837</a>
        </td>
        <td>
            <p>The FHIR R4 validation resources (StructureDefintion, ValueSet, etc) were not updated to the R4 4.0.1 technical correction versions in HAPI FHIR 4.2.0. This has been corrected.</p>
        </td>
    </tr>
</table>
</section>

<a name="change5.0.0-0"></a>
<section id="section7"><h1 data-toc-text="HAPI FHIR 4.2.0  (Koala)"><span class="helpHeaderSectionNumberBadge">1.2.7</span>HAPI FHIR 4.2.0  (Koala)</h1><a href="changelog_2020.html#change5.0.0-0" class="helpSectionLink">&nbsp;</a><a name="release-information-5"></a>
<h2>Release Information</h2>
<p><strong>Released:</strong> 2020-02-15</p>
<p><strong>Codename:</strong> (Koala)</p>
<a name="changes-5"></a>
<h2>Changes</h2>
<table class="table">
    <tr>
        <td>
            <a name="change4.2.0-0"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The version of a few dependencies have been bumped to the latest versions (dependent HAPI modules listed in brackets): <ul> <li>Jetty (CLI): 9.4.14.v20181114 -&gt; 9.4.23.v20191118</li> <li>Spring (JPA, Testpage): 5.2.1 -&gt; 5.2.3 (addresses CVE-2020-5398 and CVE-2020-5397)</li> </ul></p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-12"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1588">#1588</a>
        </td>
        <td>
            <p>Support for several new operators has been added to the <code>_filter</code> support in the JPA server. Thanks to Anthony Sute for the Pull Request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-15"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1649">#1649</a>
        </td>
        <td>
            <p>Support for LOINC 2.67 file format changes has been added to the JPA Server LOINC uploader. Thanks to Dan Vreeman for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-1675"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>In the JPA server, a new setting called <code>setPopulateIdentifierInAutoCreatedPlaceholderReferenceTargets(boolean)</code> has been added to the DaoConfig. If this setting is enabled, when creating placeholder resources, the Reference.identifier value is copied to the target resource if possible.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-1692"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1694">#1694</a>
        </td>
        <td>
            <p>It is now possible to specify resource provider method annotations on interface methods implemented by resource provider classes, as opposed to needing to specify them directly on the concrete class. Thanks to Tue Toft Nørgård for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-21"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>Searching Location.position by latitude, longitude and distance for DSTU3, R4 and R5 is now supported using a simple 'box' search. Locations falling within a box with length and width of 2 * distance, centred on specified latitude,longitude are matched.  If no distance is provided, the coordinates must match exactly.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-4"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>Chained searches using the _has search parameter as the chain value are now supported by the JPA server.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-981"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-plus"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/981">#981</a>
        </td>
        <td>
            <p>Support has been added to the server (plain and JPA) for querying with <code>_count=0</code> as a URL parameter.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-16"></a>
            <span style="color: #64c2d1; font-size: 1.1em;">
                <i class="fa fa-rocket"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1660">#1660</a>
        </td>
        <td>
            <p>A significant performance improvement was added to the Json and XML parsers when parsing large Bundle resources. Throughput for parsing these resources has been improved by roughly 50%. Thanks to Rok Bertoncelj and Bogdan Solga for providing analysis and insight that triggered this change.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-3"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>When parsing Bundle resources containing other resources, XML/JSON parsers have an option called &quot;override resource ID with bundle entry fullUrl&quot;. This option previously caused any value found in Bundle.entry.fullUrl to override any value found in Bundle.entry.resource.id (meaning that the parsed resource would take its ID from the fullUrl even if that ID disagreed with the ID found in the resource itself. As of HAPI FHIR 4.1.0 the value in Bundle.entry.fullUrl will only be used to set the parsed resource ID if the resource has no ID present.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-5"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>Changed database migration to use flyway. This adds a new table called FLY_HFJ_MIGRATION that records all database migration tasks that have already been applied. The hapi-fhir-cli migrate tool has been changed to use flyway. Learn more about flyway here: https://flywaydb.org/.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-9"></a>
            <span style="color: #129c49; font-size: 1.1em;">
                <i class="fa fa-cogs"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>The <code>IRestfulClient#registerInterceptor</code> and <code>IRestfulClient#unregisterInterceptor</code> methods now take Object as an argument instead of IClientInterceptor, allowing client interceptors to now be migrated to the new interceptor framework.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-1"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1583">#1583</a>
        </td>
        <td>
            <p>As of FHIR R4, some fields that were previously of type reference are now of type canonical. One example is QuestionnaireResponse.questionnaire. Technically this means that this field should no longer contain a relative reference, but as they are sometimes used that way, HAPI FHIR will now try to be permissive and will index relative link canonical fields such as (Questionnaire/123) as though it actually was a local relative link. Thanks to Dean Atchley for reporting and providing a test case!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-10"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1610">#1610</a>
        </td>
        <td>
            <p>A missing mandatory was added to the SNOMED CT CodeSystem that is uploaded when SCT is uploaded to the JPA server. Thanks to Anders Havn for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-11"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1643">#1643</a>
        </td>
        <td>
            <p>When validating resources containing custom valuesets defined in PrePopulatedValidationSupport outside of the JPA server, sometimes code systems could not be found resulting in false negative errors.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-13"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1650">#1650</a>
        </td>
        <td>
            <p>Several misleading comments in documentation code snippets were fixed. Thanks to Jafer Khan for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-14"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1603">#1603</a>
        </td>
        <td>
            <p>The client threw a NullPointerException in some circumstances when it received an HTTP 201 No Content response from the server. This has been corrected. Thanks to Petro Mykhailysyn for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-1671"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1671">#1671</a>
        </td>
        <td>
            <p>When performing the $expunge operation in the JPA server, the operation sometimes failed if a resource being expunged had historical versions that did not contain any tags. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-1676"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1676">#1676</a>
        </td>
        <td>
            <p>When validating an XML resource, the validatin failed if the resource contained an <code>xsi:schemaLocation</code> declaration. This has been corrected. Thanks to Brian Kaney for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-1679"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1679">#1679</a>
        </td>
        <td>
            <p>An issue with the new flyway migrator hashCode generation was resolved. Thanks to Jafer Khan for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-17"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1658">#1658</a>
        </td>
        <td>
            <p>When parsing HTML Narratives, the <code>lang</code> attribute was stripped from the outer DIV tag if present. Thanks to Sean McIlvenna for reporting!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-18"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1655">#1655</a>
        </td>
        <td>
            <p>When using a custom structure that changes the cardinality from 0..* to 0..1, the Parser was encoding a plain field instead of an array (as required by the FHIR specification). Thanks to Petro Mykhailysyn for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-19"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>A memory leak was resolved in the JPA terminology service delta upload operations.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-2"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>ValueSet PreCalculation did not successfully expand valuesets when Lucene was not enabled in the JPA server. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-20"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1689">#1689</a>
        </td>
        <td>
            <p>A correction was made to the narrative generation documentation. Thanks to GitHub user dionmcm for the pull request!</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-6"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1613">#1613</a>
        </td>
        <td>
            <p>ValueSet Precalculation sometimes failed on Oracle DBs due to an invalid SQL function. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-7"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
        </td>
        <td>
            <p>A ConcurrentModificationException was sometimes thrown when performing a cascading delete. This has been corrected.</p>
        </td>
    </tr>
    <tr>
        <td>
            <a name="change4.2.0-8"></a>
            <span style="color: #ee2324; font-size: 1.1em;">
                <i class="fa fa-bug"></i>
            </span>
        </td>
        <td>
            <a href="https://github.com/hapifhir/hapi-fhir/issues/1624">#1624</a>
        </td>
        <td>
            <p>The constructor for Verdict.java was inadvertantly made private, preventing custom rules from being written. Thanks to Jafer Khan for the pull request!</p>
        </td>
    </tr>
</table>
</section>


				</div>

				<div class="hide-sm-and-below">
</div>
				

	<!-- footer -->
	<footer class="page-footer">
		<div class="container-fluid text-center text-md-left">
			<hr class="bottom-hr">
			<div class="row pt-3 pb-3">
				<div class="col-md-3 text-center">
					<img src="../../images/logos/raccoon-forwards.png" alt="raccoon logo without text" width="100">
				</div>
				<div class="col-md-2">
					<p class="footer-heading">HAPI HAPI</p>
					<ul class="list-unstyled">
						<li><a href="https://hapifhir.io/hapi-fhir/">Home</a></li>
						<li><a href="../getting_started/downloading_and_importing.html">Download</a></li>
						<li><a href="changelog.html">Changelog</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/license.html">License</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/blog/">News</a></li>
					</ul>
					<p class="footer-heading">TEST SERVER</p>
					<ul class="list-unstyled">
						<li><a href="http://hapi.fhir.org/" target="_blank">Public Test Server</a></li>
					</ul>
					<p class="footer-heading">SUPPORT</p>
					<ul class="list-unstyled">
						<li><a href="https://smilecdr.com/" target="_blank">Smile CDR</a></li>
					</ul>
				</div>
				<div class="col-md-2">
					<p class="footer-heading">USING HAPI</p>
					<ul class="list-unstyled">
						<li><a href="../index.html">Documentation</a></li>
						<li><a href="#">Command Line Tool (cli)</a></li>
					</ul>
					<p class="footer-heading">STARTER PROJECTS</p>
					<ul class="list-unstyled">
						<li><a href="https://github.com/FirelyTeam/fhirstarters/tree/master/java/hapi-fhirstarters-client-skeleton">Client</a></li>
						<li><a href="https://github.com/FirelyTeam/fhirstarters/tree/master/java/hapi-fhirstarters-rest-server-skeleton">Plain Server</a></li>
						<li><a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter">JPA Server</a></li>
					</ul>
				</div>
				<div class="col-md-2">
					<p class="footer-heading">JAVADOCS</p>
					<ul class="list-unstyled">
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-base/">Core API</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-structures-dstu2/">Model API (DSTU2)</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-structures-dstu3/">Model API (DSTU3)</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-structures-r4/">Model API (R4)</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-structures-r5/">Model API (R5)</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-client/">Client API</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-server/">Plain Server - API</a></li>
                  <li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-server-mdm/">Plain Server - MDM API</a></li>
                  <li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-server-openapi/">Plain Server - OpenAPI</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-storage/">JPA Server - API</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-jpaserver-model/">JPA Server - Model</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-jpaserver-searchparam/">JPA Server - Search Param Support</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-jpaserver-subscription/">JPA Server - Subscription</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-jpaserver-base/">JPA Server - Base</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-validation/">Validation API</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-converter/">Version Converter API</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/apidocs/hapi-fhir-jaxrsserver-base/">Server API (JAX-RS)</a></li>
					</ul>
				</div>
				<div class="col-md-3">
					<p class="footer-heading">GET HELP</p>
					<ul class="list-unstyled">
						<li><a href="https://github.com/jamesagnew/hapi-fhir/wiki/Getting-Help" target="_blank">How to Ask for Help (read this first!)</a></li>
						<li><a href="https://groups.google.com/d/forum/hapi-fhir" target="_blank">Google Group (Ask Questions)</a></li>
						<li><a href="https://github.com/jamesagnew/hapi-fhir/issues" target="_blank">Issue Tracker (Report Bugs/Request Features)</a></li>
						<li><a href="https://chat.fhir.org/" target="_blank">FHIR.org Chat (Live Chat with FHIR Implementors)</a></li>
						<li><a href="../appendix/faq.html">Frequently Asked Questions (FAQ)</a></li>
					</ul>
					<p class="footer-heading">CONTRIBUTE</p>
					<ul class="list-unstyled">
						<li><a href="../contributing/hacking_guide.html">Guide to Hacking HAPI</a></li>
						<li><a href="https://hapifhir.io/hapi-fhir/contributors.html">Contributors</a></li>
					</ul>
				</div>
			</div>
		</div>

		<!-- footer copyright -->
		<div class="footer-copyright text-center py-3">
			<p>Updated: 2021-11-23T14:49:28.319Z — Made with <i style="color: #FF6600;" class="fas fa-heart"></i> in <a href="https://www.cbc.ca/news/canada/toronto/raccoon-city-wildlife-in-toronto-1.2742231"><img src="https://hapifhir.io/hapi-fhir/images/icons/raccoon.svg" alt="Raccoon" width="20"></a>
		</div>

	</footer>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1395874-5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-1395874-5');
	</script>


			</div>

		</div>

	</div>


<script type="application/javascript">

	$(function () {

		/*
		 * Build the TOC links on the right hand side by
		 * scanning all of the sections in the documentation
		 */
		const sections = [];
		const navLinks = [];
		var nav = $('<ul class="nav flex-column">');
		$('#toc').append(nav);

		$('#tocscroll section').each(function () {
			sections.push($(this));
			let sectionName = $(this).find('h1').first().attr('data-toc-text');
			let sectionId = $(this).prevAll('a').attr('name');
			let navLink = $('<a class="nav-link" href="#' + sectionId + '">' + sectionName + '</a>');
			navLinks.push(navLink);
			nav.append($('<li class="nav-item">').append(navLink));
		});

		/*
		 * Update the active link on the right hand side TOC when the
		 * user scrolls up and down the page. Create a function for this,
		 * then call the function once and register it to call again
		 * any time the user scrolls
		 */
		function updateTocScroll() {
			const sectionOffset = $('#tocscroll').offset().top;
			let visible = false;
			for (var idx = 0; idx < sections.length; idx++) {
				var sectionTop = sections[idx].offset().top - sectionOffset + 20;
				if (sectionTop >= 0 && !visible || (idx == sections.length -1 && !visible)) {
					navLinks[idx].addClass('active');
					visible = true;
				} else {
					navLinks[idx].removeClass('active');
				}
			}

		}

		$('#tocscroll').scroll(updateTocScroll);
		updateTocScroll();

		/*
	    * When the page first loads, automatically scroll the left docs TOC
	    * scroller to the actively displayed page.
	    */
		var activetop = $('.activechapter').offset().top - $('#tocscroll').offset().top - 30;
		if (activetop < 100) {
			activetop = 0;
		}
		$('#navcolumn').scrollTop(activetop);

		function updateNavScroll() {
			if ($('#navcolumn').scrollTop() < 100) {
				$('.button-scroll-up-to-search').fadeOut(500);
			} else {
				$('.button-scroll-up-to-search').fadeIn(500);
			}
		}

		updateNavScroll();
		$('#navcolumn').scroll(updateNavScroll);

	});
</script>



<script type="application/javascript">
	function hover(element) {
		element.setAttribute('src', '../../../images/icons/link-grey.html');
	}

	function unhover(element) {
		element.setAttribute('src', '../../../images/icons/smiley-grey.html');
	}

   new ClipboardJS('.clipboardCopyBtn');

</script>
</body>


<!-- Mirrored from hapifhir.io/hapi-fhir/docs/introduction/changelog_2020.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Dec 2021 23:59:36 GMT -->
</html>

